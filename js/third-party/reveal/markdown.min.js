"use strict";function _typeof(t){function e(t){return r.apply(this,arguments)}var r,a;function n(t){return a.apply(this,arguments)}return(_typeof="function"==typeof Symbol&&"symbol"===_typeof(Symbol.iterator)?(a=function(t){return void 0===t?"undefined":_typeof(t)},n.toString=function(){return a.toString()},n):(r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof(t)},e.toString=function(){return r.toString()},e))(t)}!function(t,e){"function"==typeof define&&define.amd?(t.marked=require("./marked"),t.RevealMarkdown=e(t.marked),t.RevealMarkdown.initialize()):"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e(require("./marked")):(t.RevealMarkdown=e(t.marked),t.RevealMarkdown.initialize())}(void 0,function(i){function s(t){var e=(t.querySelector("[data-template]")||t.querySelector("script")||t).textContent,r=(e=e.replace(new RegExp(o,"g"),"<\/script>")).match(/^\n?(\s*)/)[1].length,a=e.match(/^\n?(\t*)/)[1].length;return 0<a?e=e.replace(new RegExp("\\n?\\t{"+a+"}","g"),"\n"):1<r&&(e=e.replace(new RegExp("\\n? {"+r+"}","g"),"\n")),e}function u(t){for(var e=t.attributes,r=[],a=0,n=e.length;a<n;a++){var o=e[a].name,i=e[a].value;/data\-(markdown|separator|vertical|notes)/gi.test(o)||(i?r.push(o+'="'+i+'"'):r.push(o))}return r.join(" ")}function h(t){return(t=t||{}).separator=t.separator||a,t.notesSeparator=t.notesSeparator||n,t.attributes=t.attributes||"",t}function f(t,e){e=h(e);var r=t.split(new RegExp(e.notesSeparator,"mgi"));return 2===r.length&&(t=r[0]+'<aside class="notes">'+i(r[1].trim())+"</aside>"),'<script type="text/template">'+(t=t.replace(/<\/script>/g,o))+"<\/script>"}function l(t,e){e=h(e);for(var r,a,n,o=new RegExp(e.separator+(e.verticalSeparator?"|"+e.verticalSeparator:""),"mg"),i=new RegExp(e.separator),s=0,u=!0,l=[];r=o.exec(t);)notes=null,!(a=i.test(r[0]))&&u&&l.push([]),n=t.substring(s,r.index),a&&u?l.push(n):l[l.length-1].push(n),s=o.lastIndex,u=a;(u?l:l[l.length-1]).push(t.substring(s));for(var d="",c=0,p=l.length;c<p;c++)l[c]instanceof Array?(d+="<section "+e.attributes+">",l[c].forEach(function(t){d+="<section data-markdown>"+f(t,e)+"</section>"}),d+="</section>"):d+="<section "+e.attributes+" data-markdown>"+f(l[c],e)+"</section>";return d}function e(){for(var t,e=document.querySelectorAll("[data-markdown]"),r=0,a=e.length;r<a;r++)if((t=e[r]).getAttribute("data-markdown").length){var n=new XMLHttpRequest,o=t.getAttribute("data-markdown");datacharset=t.getAttribute("data-charset"),null!=datacharset&&""!=datacharset&&n.overrideMimeType("text/html; charset="+datacharset),n.onreadystatechange=function(){4===n.readyState&&(200<=n.status&&n.status<300||0===n.status?t.outerHTML=l(n.responseText,{separator:t.getAttribute("data-separator"),verticalSeparator:t.getAttribute("data-separator-vertical"),notesSeparator:t.getAttribute("data-separator-notes"),attributes:u(t)}):t.outerHTML='<section data-state="alert">ERROR: The attempt to fetch '+o+" failed with HTTP status "+n.status+".Check your browser's JavaScript console for more details.<p>Remember that you need to serve the presentation HTML from a HTTP server.</p></section>")},n.open("GET",o,!1);try{n.send()}catch(t){alert("Failed to get the Markdown file "+o+". Make sure that the presentation and the file are served by a HTTP server and the file can be found there. "+t)}}else t.getAttribute("data-separator")||t.getAttribute("data-separator-vertical")||t.getAttribute("data-separator-notes")?t.outerHTML=l(s(t),{separator:t.getAttribute("data-separator"),verticalSeparator:t.getAttribute("data-separator-vertical"),notesSeparator:t.getAttribute("data-separator-notes"),attributes:u(t)}):t.innerHTML=f(s(t))}function d(t,e,r){var a=new RegExp(r,"mg"),n=new RegExp('([^"= ]+?)="([^"=]+?)"',"mg"),o=t.nodeValue;if(matches=a.exec(o)){var i=matches[1],o=o.substring(0,matches.index)+o.substring(a.lastIndex);for(t.nodeValue=o;matchesClass=n.exec(i);)e.setAttribute(matchesClass[1],matchesClass[2]);return!0}return!1}function r(){for(var t=document.querySelectorAll("[data-markdown]"),e=0,r=t.length;e<r;e++){var a,n,o=t[e];o.getAttribute("data-markdown-parsed")||(o.setAttribute("data-markdown-parsed",!0),a=o.querySelector("aside.notes"),n=s(o),o.innerHTML=i(n),function t(e,r,a,n,o){if(null!=r&&null!=r.childNodes&&0<r.childNodes.length){previousParentElement=r;for(var i=0;i<r.childNodes.length;i++){if(childElement=r.childNodes[i],0<i)for(j=i-1;0<=j;){if(aPreviousChildElement=r.childNodes[j],"function"==typeof aPreviousChildElement.setAttribute&&"BR"!=aPreviousChildElement.tagName){previousParentElement=aPreviousChildElement;break}--j}parentSection=e,"section"==childElement.nodeName&&(parentSection=childElement,previousParentElement=childElement),"function"!=typeof childElement.setAttribute&&childElement.nodeType!=Node.COMMENT_NODE||t(parentSection,childElement,previousParentElement,n,o)}}r.nodeType==Node.COMMENT_NODE&&0==d(r,a,n)&&d(r,e,o)}(o,o,null,o.getAttribute("data-element-attributes")||o.parentNode.getAttribute("data-element-attributes")||"\\.element\\s*?(.+?)$",o.getAttribute("data-attributes")||o.parentNode.getAttribute("data-attributes")||"\\.slide:\\s*?(\\S.+?)$"),a&&o.appendChild(a))}}var a="^\r?\n---\r?\n$",n="notes?:",o="__SCRIPT_END__";return{initialize:function(){if(void 0===i)throw"The reveal.js Markdown plugin requires marked to be loaded";"undefined"!=typeof hljs&&i.setOptions({highlight:function(t,e){return hljs.highlightAuto(t,[e]).value}});var t=Reveal.getConfig().markdown;t&&i.setOptions(t),e(),r()},processSlides:e,convertSlides:r,slidify:l}});